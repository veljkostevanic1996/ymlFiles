pipeline{

    agent any

    stages{
        /*
        stage('Checkout') {
            steps {
                checkout([$class: 'GitSCM',
                    branches: [[name: '*/master']],
                    extensions: [[$class: 'RelativeTargetDirectory',
                                relativeTargetDir: '/home/vstevanic/Desktop/Test']],
                    userRemoteConfigs: [[credentialsId: '1',
                        url: 'https://github.com/brki18/devops_web_goat.git']]])
            }
        }

        stage('add permisions'){

            steps{

                sh 'sudo chmod -R 777 /home/vstevanic/Desktop/Test/'
            }
        }
        */
        stage('build docker images with maven'){

            steps{
                withCredentials([usernamePassword(credentialsId: 'docker', passwordVariable: 'PASSWORD_VAR', usernameVariable: 'USERNAME_VAR')])
                    {
                        sh 'mvn clean install -Dusername=${USERNAME_VAR} -Dpassword=${PASSWORD_VAR}'
                    }
            }
        }
    }
}